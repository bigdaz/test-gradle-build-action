name: Test warnings
on:
  push:
    branches:
      - action-annotations
  workflow_dispatch:

jobs:
  seed-build:
    runs-on: ubuntu-latest
    steps:
    - name: Echo warning
      run: echo "::warning::Try some **markdown** _foo_"
    - uses: LouisBrunner/checks-action@v1.1.1
      with:
        token: ${{ secrets.GITHUB_TOKEN }}
        name: Test success
        conclusion: success
    - uses: LouisBrunner/checks-action@v1.1.1
      with:
        token: ${{ secrets.GITHUB_TOKEN }}
        name: Test neutral
        conclusion: neutral
        output: |
          {"summary":"[Build Scan URL: https://ge.gradle.org](https://ge.gradle.org)", "text_description":"Here is a bunch of text\nAnother line\nLine *with* _markdown_"}
    - uses: LouisBrunner/checks-action@v1.1.1
      with:
        token: ${{ secrets.GITHUB_TOKEN }}
        name: Test with annotation
        conclusion: neutral
        output: |
          {"summary":"[Build Scan URL: https://ge.gradle.org](https://ge.gradle.org)", "text_description":"Here is a bunch of text\nAnother line\nLine *with* _markdown_"}
        annotations: |
          [{"path":"README.md","start_line":"1","end_line":"2","annotation_level":"warning","title":"Custom annotation","message":"This is my custom annotation"}]

